package dev._3000IQPlay.trillium.modules.exploit;

import dev._3000IQPlay.trillium.modules.Module;
import dev._3000IQPlay.trillium.setting.Setting;
import net.minecraft.util.math.Vec3d;
import net.minecraft.entity.item.EntityBoat;
import net.minecraft.network.play.client.CPacketVehicleMove;

public class BoatKiller extends Module {
	
	public Setting<Float> posY1 = this.register(new Setting<>("YPos1", 0.15f, 0.1f, 3.0f));
	public Setting<Float> posY2 = this.register(new Setting<>("YPos2", 65.0f, 5.0f, 300.0f));
	
	public BoatKiller() {
        super("BoatKiller", "Kills you and the person behind you in a Boat (You must control the boat)", Module.Category.EXPLOIT, true, false, false);
    }

    @Override
    public void onEnable() {
        if (mc.player.getRidingEntity() instanceof EntityBoat) {
            EntityBoat boat = (EntityBoat) mc.player.getRidingEntity();
            Vec3d originalPos = boat.getPositionVector();
            boat.setPosition(boat.posX, boat.posY + this.posY1.getValue(), boat.posZ);
            CPacketVehicleMove groundPacket = new CPacketVehicleMove(boat);
            boat.setPosition(boat.posX, boat.posY + this.posY1.getValue(), boat.posZ);
            CPacketVehicleMove skyPacket = new CPacketVehicleMove(boat);
            boat.setPosition(originalPos.x, originalPos.y, originalPos.z);
            for (int i = 0; i < 100; i++) {
                mc.player.connection.sendPacket(skyPacket);
                mc.player.connection.sendPacket(groundPacket);
            }
            mc.player.connection.sendPacket(new CPacketVehicleMove(boat));
            super.onEnable();
        }
    }
}